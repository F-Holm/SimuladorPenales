#include <Arduino.h>
#include <WiFi.h>
#include <WebServer.h>

/* AÃ±ade tu SSID & Clave para acceder a tu Wifi */
const char* ssid = "IPM-WIFI";  // Tu SSID
const char* password = "ipm5880!";  //Tu Clave
 
/*
    Declaramos un objeto de la libreria WebServer para poder acceder a sus funciones
    Y como parametro 80, que es el puerto estandar de todos los servicios WEB HTTP
*/
WebServer server(8080);
 
String SendHTML();
void servidor() {
  Serial.println("GPIO5 Estado: OFF");
  server.send(200, "text/html", SendHTML());
}
 
void handle_NotFound() {
  server.send(404, "text/plain", "La pagina no existe");
}

String SendHTML() {
  String pagina = "<!DOCTYPE html>";
pagina = pagina + "\n"+"<html lang=\"es\">";
pagina = pagina + "\n"+"<head>";
    pagina = pagina + "\n"+"<meta charset=\"UTF-8\">";
    pagina = pagina + "\n"+"<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">";
   pagina = pagina + "\n"+"<title>Simulador penales</title>";
pagina = pagina + "\n"+"</head>";
pagina = pagina + "\n"+"<head>";
    pagina = pagina + "\n"+"<style>";
        pagina = pagina + "\n"+"body {";
            pagina = pagina + "\n"+"display: flex;";
            pagina = pagina + "\n"+"justify-content: center;";
            pagina = pagina + "\n"+"align-items: center;";
            pagina = pagina + "\n"+"height: 100vh;";
            pagina = pagina + "\n"+"margin: 0;";
        pagina = pagina + "\n"+"}";

        pagina = pagina + "\n"+".soccer-goal {";
        pagina = pagina + "\n"+"margin-top: 5vw;";
            pagina = pagina + "\n"+"position: relative;";
            pagina = pagina + "\n"+"width: 70vw;";
            pagina = pagina + "\n"+"height: 35vw;";
            pagina = pagina + "\n"+"background-color: white;";
        pagina = pagina + "\n"+"}";

        pagina = pagina + "\n"+".goal-post {";
            pagina = pagina + "\n"+"width: 1.6vw;";
            pagina = pagina + "\n"+"background-color: black;";
            pagina = pagina + "\n"+"position: absolute;";
        pagina = pagina + "\n"+"}";

        pagina = pagina + "\n"+".top-post {";
            pagina = pagina + "\n"+"top: 0;";
            pagina = pagina + "\n"+"left: 0;";
            pagina = pagina + "\n"+"height: 1.6vw;";
            pagina = pagina + "\n"+"width: 70vw;";
        pagina = pagina + "\n"+"}";

        pagina = pagina + "\n"+".left-post {";
           pagina = pagina + "\n"+"top: 1.6vw;";
            pagina = pagina + "\n"+"left: 0;";
            pagina = pagina + "\n"+"height: 33.4vw;";
        pagina = pagina + "\n"+"}";

        pagina = pagina + "\n"+".right-post {";
            pagina = pagina + "\n"+"top: 1.6vw;";
            pagina = pagina + "\n"+"right: 0;";
           pagina = pagina + "\n"+"height: 33.4vw;";
        pagina = pagina + "\n"+"}";

        pagina = pagina + "\n"+".goal-grid {";
            pagina = pagina + "\n"+"position: absolute;";
            pagina = pagina + "\n"+"top: 1.6vw;";
            pagina = pagina + "\n"+"left: 1.6vw;";
            pagina = pagina + "\n"+"width: 66.8vw;";
            pagina = pagina + "\n"+"height: 33.4vw;";
            pagina = pagina + "\n"+"display: grid;";
            pagina = pagina + "\n"+"grid-template-columns: repeat(3, 1fr);";
            pagina = pagina + "\n"+"grid-template-rows: repeat(3, 1fr);";
        pagina = pagina + "\n"+"}";

        pagina = pagina + "\n"+".goal-cell {";
            pagina = pagina + "\n"+"border: 0.1vw solid black;";
            pagina = pagina + "\n"+"display: flex;";
            pagina = pagina + "\n"+"align-items: center;";
            pagina = pagina + "\n"+"justify-content: center;";
        pagina = pagina + "\n"+"}";

        pagina = pagina + "\n"+"#c1{";
            pagina = pagina + "\n"+"background-color: white;";
        pagina = pagina + "\n"+"}";
        pagina = pagina + "\n"+"#c2{";
            pagina = pagina + "\n"+"background-color: white;";
        pagina = pagina + "\n"+"}";
        pagina = pagina + "\n"+"#c3{";
            pagina = pagina + "\n"+"background-color: white;";
        pagina = pagina + "\n"+"}";
        pagina = pagina + "\n"+"#c4{";
            pagina = pagina + "\n"+"background-color: white;";
        pagina = pagina + "\n"+"}";
        pagina = pagina + "\n"+"#c5{";
            pagina = pagina + "\n"+"background-color: white;";
        pagina = pagina + "\n"+"}";
        pagina = pagina + "\n"+"#c6{";
            pagina = pagina + "\n"+"background-color: white;";
        pagina = pagina + "\n"+"}";
        pagina = pagina + "\n"+"#c7{";
            pagina = pagina + "\n"+"background-color: white;";
        pagina = pagina + "\n"+"}";
        pagina = pagina + "\n"+"#c8{";
            pagina = pagina + "\n"+"background-color: white;";
        pagina = pagina + "\n"+"}";
        pagina = pagina + "\n"+"#c9{";
            pagina = pagina + "\n"+"background-color: white;";
        pagina = pagina + "\n"+"}";
        pagina = pagina + "\n"+".circulo{";
            pagina = pagina + "\n"+"position: absolute;";
            pagina = pagina + "\n"+"width: 10vh;";
            pagina = pagina + "\n"+"height: 10vh;";
            pagina = pagina + "\n"+"border-radius: 50%;";
            pagina = pagina + "\n"+"top: 5vh;";
            pagina = pagina + "\n"+"border: 0.1vw solid black;";
        pagina = pagina + "\n"+"}";
        pagina = pagina + "\n"+"#circulo1{";
            pagina = pagina + "\n"+"background-color: green;";
            pagina = pagina + "\n"+"margin-right: 45vw;";
        pagina = pagina + "\n"+"}";
        pagina = pagina + "\n"+"#circulo2{";
            pagina = pagina + "\n"+"background-color: red;";
        pagina = pagina + "\n"+"}";
        pagina = pagina + "\n"+"#circulo3{";
            pagina = pagina + "\n"+"background-color: white;";
            pagina = pagina + "\n"+"margin-left: 45vw;";
        pagina = pagina + "\n"+"}";
        pagina = pagina + "\n"+".tick::before {";
            pagina = pagina + "\n"+"content: '\2713';";
            pagina = pagina + "\n"+"font-size: 12vh;";
            pagina = pagina + "\n"+"color: white;";
            pagina = pagina + "\n"+"position: absolute;";
            pagina = pagina + "\n"+"top: 50%;";
            pagina = pagina + "\n"+"left: 50%;";
            pagina = pagina + "\n"+"transform: translate(-50%, -50%);";
        pagina = pagina + "\n"+"}";
        pagina = pagina + "\n"+".x::before{";
            pagina = pagina + "\n"+"content: '\2717';";
            pagina = pagina + "\n"+"font-size: 10vh;";
            pagina = pagina + "\n"+"color: white;";
            pagina = pagina + "\n"+"position: absolute;";
            pagina = pagina + "\n"+"top: 50%;";
            pagina = pagina + "\n"+"left: 50%;";
            pagina = pagina + "\n"+"transform: translate(-50%, -50%);";
        pagina = pagina + "\n"+"}";
    pagina = pagina + "\n"+"</style>";
pagina = pagina + "\n"+"</head>";
pagina = pagina + "\n"+"<body>";
    pagina = pagina + "\n"+"<div class=\"circulo tick\" id=\"circulo1\"></div>";
    pagina = pagina + "\n"+"<div class=\"circulo x\" id=\"circulo2\"></div>";
    pagina = pagina + "\n"+"<div class=\"circulo\" id=\"circulo3\"></div>";
    pagina = pagina + "\n"+"<div class=\"soccer-goal\">";
        pagina = pagina + "\n"+"<div class=\"goal-post top-post\"></div>";
        pagina = pagina + "\n"+"<div class=\"goal-post left-post\"></div>";
        pagina = pagina + "\n"+"<div class=\"goal-post right-post\"></div>";
        pagina = pagina + "\n"+"<div class=\"goal-grid\">";
            pagina = pagina + "\n"+"<div class=\"goal-cell\" id=\"c1\"></div>";
            pagina = pagina + "\n"+"<div class=\"goal-cell\" id=\"c2\"></div>";
            pagina = pagina + "\n"+"<div class=\"goal-cell\" id=\"c3\"></div>";
            pagina = pagina + "\n"+"<div class=\"goal-cell\" id=\"c4\"></div>";
            pagina = pagina + "\n"+"<div class=\"goal-cell\" id=\"c5\"></div>";
            pagina = pagina + "\n"+"<div class=\"goal-cell\" id=\"c6\"></div>";
            pagina = pagina + "\n"+"<div class=\"goal-cell\" id=\"c7\"></div>";
            pagina = pagina + "\n"+"<div class=\"goal-cell\" id=\"c8\"></div>";
            pagina = pagina + "\n"+"<div class=\"goal-cell\" id=\"c9\"></div>";
        pagina = pagina + "\n"+"</div>";
    pagina = pagina + "\n"+"</div>";
pagina = pagina + "\n"+"</body>";
pagina = pagina + "\n"+"</html>";
return pagina;
}
 
void setup() {
  /*
   * Declaracion de la velocidad de comunicacion entre Arduino IDE y ESP32
   * Configura el comportamiento de los pines
   */
  Serial.begin(9600);//115200);
/*
 * Configuracion de la conexion a la Wifi de tu casa
 */
  WiFi.mode(WIFI_STA);
  WiFi.begin(ssid, password);
  Serial.println("");
 
  // Wait for connection
  while (WiFi.status() != WL_CONNECTED) {
    delay(500);
    Serial.print(".");
  }
  Serial.println("");
  Serial.print("Conectado a ");
  Serial.println(ssid);
  Serial.print("Direccion IP: ");
  Serial.println(WiFi.localIP());
/*
 * Arrancamos el Servicio WEB
 */
  server.begin();
  Serial.println("Servidor HTTP iniciado");
  //servidor();
}
void loop() {
  //server.handleClient();
}